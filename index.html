<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
    <title>RunVision Tabata PRO</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#051328">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">
    <!-- LEFT: editor -->
    <aside class="panel left-panel" id="editor">
        <header>
            <h1>RunVision Tabata — PRO</h1>
            <p>Crie, personalize e entregue treinos Tabata.</p>
        </header>

        <div class="controls">
            <label>Nome do protocolo</label>
            <label for="protocolName"></label><input id="protocolName" type="text" value="Tabata PRO - Full Body">

            <div class="row">
                <div>
                    <label>Tempo Trabalho (s)</label>
                    <label for="workTime"></label><input id="workTime" type="number" min="5" value="20">
                </div>
                <div>
                    <label>Descanso (s)</label>
                    <label for="restTime"></label><input id="restTime" type="number" min="5" value="10">
                </div>
            </div>

            <div class="row">
                <div>
                    <label>Rounds</label>
                    <label for="rounds"></label><input id="rounds" type="number" min="1" value="8">
                </div>
                <div>
                    <label>Preparo (s)</label>
                    <label for="prepare"></label><input id="prepare" type="number" min="0" value="5">
                </div>
            </div>

            <label>Exercícios (texto — opcional: |URL-da-imagem-ou-video)</label>
            <div id="exercisesList" class="exercises"></div>

            <div class="add-row">
                <label for="newExercise"></label><input id="newExercise" placeholder="Ex: Burpee | https://.../burpee.jpg">
                <button class="btn" id="addExerciseBtn">Adicionar</button>
            </div>

            <div class="row actions">
                <button class="btn" id="savePreset">Salvar</button>
                <button class="btn ghost" id="loadDefault">Default</button>
                <button class="btn ghost" id="exportBtn">Exportar</button>
                <button class="btn ghost" id="importBtn">Importar</button>
                <input id="fileInput" type="file" accept="application/json" hidden>
            </div>

            <label>Presets</label>
            <div id="presetsContainer" class="presets"></div>

            <div class="small-controls">
                <label class="toggle-row"><input type="checkbox" id="vibrateToggle" checked> Vibração nos últimos 5s</label>
                <label class="toggle-row"><input type="checkbox" id="voiceToggle" checked> Voz (pt-BR)</label>
                <label class="toggle-row"><input type="checkbox" id="soundToggle" checked> Som</label>
                <label class="toggle-row"><input type="checkbox" id="contrastToggle"> Alto Contraste</label>
            </div>

            <footer>
                <small>PWA pronto — instale no celular. LocalStorage salva presets.</small>
            </footer>
        </div>
    </aside>

    <!-- RIGHT: timer / player -->
    <main class="panel player-panel">
        <div class="player-header">
            <div>
                <strong id="displayName">Tabata PRO - Full Body</strong>
                <div class="meta">Rounds: <span id="displayRounds">8</span> • Work: <span id="displayWork">20s</span> • Rest: <span id="displayRest">10s</span></div>
            </div>

            <div class="player-controls">
                <button id="fullscreenBtn" class="btn ghost">Fullscreen</button>
                <button id="startPause" class="btn">Start</button>
                <button id="resetBtn" class="btn ghost">Reset</button>
            </div>
        </div>

        <section class="ring-wrap">
            <div id="ring" class="ring" role="region" aria-live="polite">
                <div class="ring-inner">
                    <div id="timeLeft" class="time">0:20</div>
                    <div id="phaseLabel" class="phase">PREPARE</div>
                    <div class="exercise-row">
                        <div id="currentExercise" class="exercise-name">-</div>
                    </div>
                </div>
            </div>

            <div class="media-preview" id="mediaPreview" aria-hidden="true">
                <!-- images/videos por exercício -->
            </div>
        </section>

        <div class="progress">
            <div class="bar" id="progressBar"></div>
        </div>

        <div class="rounds-row">
            <div>Round <span id="curRound">0</span>/<span id="totalRound">8</span></div>
            <div id="totalTimeLeft">Total: 0:00</div>
        </div>

        <div class="quick-row">
            <button id="quickTabata" class="btn">Tabata Clássico</button>
            <button id="quickTabataShort" class="btn ghost">Tabata Curto</button>
            <button id="shareBtn" class="btn ghost">Compartilhar Preset</button>
        </div>
    </main>
</div>

<!-- CTA modal (aparece no final) -->
<div id="ctaModal" class="modal" aria-hidden="true">
    <div class="modal-card">
        <button id="closeModal" class="modal-close">✕</button>
        <h2>Treino concluído!</h2>
        <p>Quer ter treinos prontos, planilhas inteligentes e o eBook de treinos híbridos?</p>
        <div class="coupon" id="couponBlock">Cupom: <strong id="couponCode">RUNVISION10</strong> • <span id="couponTimer">00:30</span></div>
        <a id="ctaButton" class="btn" href="#" target="_blank" rel="noopener">Quero o RunVision</a>
        <button id="ctaShare" class="btn ghost">Enviar link por WhatsApp</button>
    </div>
</div>

<script src="script.js"></script>
<script>
    // registra service worker se disponível
    if('serviceWorker' in navigator){
        navigator.serviceWorker.register('sw.js').catch(()=>{/*silent*/});
    }
</script>
</body>
</html>
