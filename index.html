<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
    <title>RunVision Tabata PRO</title>
    <meta name="theme-color" content="#051328">
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="app">

    <!-- LEFT PANEL -->
    <aside class="panel left-panel" id="editor">
        <header>
            <h1>RunVision Tabata — PRO</h1>
            <p>Crie, personalize e entregue treinos Tabata.</p>
        </header>

        <div class="controls">

            <label>Nome do protocolo</label>
            <label for="protocolName"></label><input id="protocolName" type="text" value="Tabata PRO - Full Body">

            <div class="row">
                <div>
                    <label>Tempo Trabalho (s)</label>
                    <label for="workTime"></label><input id="workTime" type="number" min="5" value="20">
                </div>

                <div>
                    <label>Descanso (s)</label>
                    <label for="restTime"></label><input id="restTime" type="number" min="5" value="10">
                </div>
            </div>

            <div class="row">
                <div>
                    <label>Rounds</label>
                    <label for="rounds"></label><input id="rounds" type="number" min="1" value="8">
                </div>
                <div>
                    <label>Preparo (s)</label>
                    <label for="prepare"></label><input id="prepare" type="number" min="0" value="5">
                </div>
            </div>

            <label>Exercícios (texto — opcional: |URL-da-imagem)</label>
            <div id="exercisesList" class="exercises"></div>

            <div class="add-row">
                <label for="newExercise"></label><input id="newExercise" placeholder="Ex: Burpee | https://.../burpee.jpg">
                <button class="btn" id="addExerciseBtn">Adicionar</button>
            </div>

            <div class="row actions">
                <button class="btn" id="savePreset">Salvar</button>
                <button class="btn ghost" id="loadDefault">Default</button>
                <button class="btn ghost" id="exportBtn">Exportar</button>
                <button class="btn ghost" id="importBtn">Importar</button>
                <input id="fileInput" type="file" accept="application/json" hidden>
            </div>

            <label>Presets</label>
            <div id="presetsContainer" class="presets"></div>

            <div class="small-controls">
                <label class="toggle-row"><input type="checkbox" id="vibrateToggle" checked> Vibração nos últimos 5s</label>
                <label class="toggle-row"><input type="checkbox" id="voiceToggle" checked> Voz (pt-BR)</label>
                <label class="toggle-row"><input type="checkbox" id="soundToggle" checked> Som</label>
                <label class="toggle-row"><input type="checkbox" id="contrastToggle"> Alto Contraste</label>
            </div>

            <footer>
                <small>PWA pronto — instale no celular. LocalStorage salva presets.</small>
            </footer>

        </div>
    </aside>

    <!-- RIGHT PANEL -->
    <main class="panel player-panel">

        <div class="player-header">
            <div>
                <strong id="displayName">Tabata PRO - Full Body</strong>
                <div class="meta">Rounds: <span id="displayRounds">8</span> • Work: <span id="displayWork">20s</span> • Rest: <span id="displayRest">10s</span></div>
            </div>

            <div class="player-controls">
                <button id="fullscreenBtn" class="btn ghost">Fullscreen</button>
                <button id="startPause" class="btn">Start</button>
                <button id="resetBtn" class="btn ghost">Reset</button>
            </div>
        </div>

        <section class="ring-wrap">
            <div id="ring" class="ring" role="region" aria-live="polite">
                <div class="ring-inner">
                    <div id="timeLeft" class="time">0:20</div>
                    <div id="phaseLabel" class="phase">PREPARE</div>
                    <div class="exercise-row">
                        <div id="currentExercise" class="exercise-name">-</div>
                    </div>
                </div>
            </div>

            <div class="media-preview" id="mediaPreview" aria-hidden="true"></div>
        </section>

        <div class="progress">
            <div class="bar" id="progressBar"></div>
        </div>

        <div class="rounds-row">
            <div>Round <span id="curRound">0</span>/<span id="totalRound">8</span></div>
            <div id="totalTimeLeft">Total: 0:00</div>
        </div>

        <!-- OBJETIVOS / ABAS -->
        <div class="objective-tabs">
            <button class="obj-btn active" data-target="inicianteList">Iniciante</button>
            <button class="obj-btn" data-target="intermediarioList">Intermediário</button>
            <button class="obj-btn" data-target="avancadoList">Avançado</button>
        </div>

        <!-- TABELAS DE TREINOS -->
        <div class="objective-container">

            <!-- INICIANTE -->
            <div id="inicianteList" class="objective-list show">
                <button class="obj-item" data-preset="iniciante1">Full Body Leve</button>
                <button class="obj-item" data-preset="iniciante2">Pernas & Glúteos</button>
                <button class="obj-item" data-preset="iniciante3">Core & Abs Leve</button>
                <button class="obj-item" data-preset="iniciante4">Mobilidade + HIIT Leve</button>
                <button class="obj-item" data-preset="iniciante5">Cardio Baixa Intensidade</button>
                <button class="obj-item" data-preset="iniciante6">Braços & Ombros Leve</button>
                <button class="obj-item" data-preset="iniciante7">Treino 7 Minutos</button>
                <button class="obj-item" data-preset="iniciante8">ABS 4 minutos</button>
                <button class="obj-item" data-preset="iniciante9">HIIT Leve Sem Impacto</button>
                <button class="obj-item" data-preset="iniciante10">Posterior & Glúteos</button>
            </div>

            <!-- INTERMEDIÁRIO -->
            <div id="intermediarioList" class="objective-list">
                <button class="obj-item" data-preset="inter1">Full Body Médio</button>
                <button class="obj-item" data-preset="inter2">Pernas Explosivas</button>
                <button class="obj-item" data-preset="inter3">ABS Intenso</button>
                <button class="obj-item" data-preset="inter4">HIIT 12 Minutos</button>
                <button class="obj-item" data-preset="inter5">Cardio Médio</button>
                <button class="obj-item" data-preset="inter6">Glúteo + Core</button>
                <button class="obj-item" data-preset="inter7">Treino Militar Médio</button>
                <button class="obj-item" data-preset="inter8">HIIT Pirâmide Média</button>
                <button class="obj-item" data-preset="inter9">Braços & Core Médio</button>
                <button class="obj-item" data-preset="inter10">Full Body Combinado</button>
            </div>

            <!-- AVANÇADO -->
            <div id="avancadoList" class="objective-list">
                <button class="obj-item" data-preset="avan1">Full Body Avançado</button>
                <button class="obj-item" data-preset="avan2">HIIT Brutal 15 Min</button>
                <button class="obj-item" data-preset="avan3">ABS Infernal</button>
                <button class="obj-item" data-preset="avan4">Pernas Explosivas PRO</button>
                <button class="obj-item" data-preset="avan5">Cardio Hard</button>
                <button class="obj-item" data-preset="avan6">Treino Militar Pesado</button>
                <button class="obj-item" data-preset="avan7">Tabata Avançado 20/10</button>
                <button class="obj-item" data-preset="avan8">Full Body Sprint</button>
                <button class="obj-item" data-preset="avan9">Core Avançado</button>
                <button class="obj-item" data-preset="avan10">Explosão Total PRO</button>
            </div>

        </div><!-- objective-container -->

        <!-- BOTÃO MEU PROGRESSO (abre página inteira) -->
        <button id="openProgress" class="btn ghost" style="margin-top:18px;">Meu Progresso</button>

    </main> <!-- FECHAMENTO CORRETO DO MAIN -->

</div><!-- app -->

<!-- PROGRESS PAGE (Opção C: página inteira separada) -->
<div id="progressPage" class="progress-page" aria-hidden="true">
    <div class="progress-page-inner panel">
        <header>
            <h2>Meu Progresso</h2>
            <p>Acompanhe seu peso, metas e conquistas.</p>
        </header>

        <button id="closeProgress" class="btn ghost" style="margin-bottom:12px;">Voltar</button>

        <div class="progress-columns">

            <div class="progress-left">
                <div class="stat-card">
                    <div class="stat-title">Peso Inicial</div>
                    <label for="pesoInicial"></label><input id="pesoInicial" type="number" placeholder="Ex: 85" style="width:100%;margin-top:6px;">
                </div>

                <div class="stat-card">
                    <div class="stat-title">Peso Atual</div>
                    <label for="pesoAtual"></label><input id="pesoAtual" type="number" placeholder="Ex: 82" style="width:100%;margin-top:6px;">
                </div>

                <div class="stat-card">
                    <button id="salvarPesoBtn" class="btn" style="width:100%;">Salvar Peso</button>
                    <div id="resultadoPeso" style="margin-top:6px;color:var(--muted);font-size:14px;">Nenhum registro ainda</div>
                </div>

                <div class="stat-card">
                    <div class="stat-title">Meta Semanal</div>
                    <label for="metaSemanal"></label><input id="metaSemanal" type="number" placeholder="Ex: 3 treinos/semana" style="width:100%;margin-top:6px;">
                    <div id="metaStatus" style="margin-top:6px;font-size:14px;color:#fff;"></div>
                </div>
            </div>

            <div class="progress-right">
                <h4>Gráfico de Evolução</h4>
                <canvas id="graficoPeso" width="600" height="240"></canvas>

                <h4 style="margin-top:14px;">Histórico de Treinos</h4>
                <div id="historicoTreinos" class="history-box"></div>

                <h4 style="margin-top:14px;">Conquistas</h4>
                <div id="badgesContainer" class="badges-box"></div>
            </div>

        </div>
    </div>
</div>

<script src="script.js"></script>
<script>
    // registra service worker (silencioso)
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js').catch(()=>{});
    }
</script>

<footer class="credit">
    Desenvolvido por <b>Mario Farias – RunVision</b>
</footer>

</body>
</html>
